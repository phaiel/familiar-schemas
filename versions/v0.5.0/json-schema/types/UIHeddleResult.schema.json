{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "UIHeddleResult",
  "description": "Structured result from the Heddle classification pipeline",
  "type": "object",
  "properties": {
    "classifications": {
      "description": "Classification results",
      "default": [],
      "type": "array",
      "items": {
        "$ref": "#/definitions/UIClassification"
      }
    },
    "physics": {
      "description": "Physics hints",
      "default": null,
      "anyOf": [
        {
          "$ref": "#/definitions/UIPhysicsResult"
        },
        {
          "type": "null"
        }
      ]
    },
    "purpose": {
      "description": "Detected purpose/intent",
      "default": null,
      "type": [
        "string",
        "null"
      ]
    },
    "segments": {
      "description": "Segmented content",
      "default": [],
      "type": "array",
      "items": {
        "$ref": "#/definitions/UIHeddleSegment"
      }
    }
  },
  "definitions": {
    "UIClassification": {
      "description": "A classification result",
      "type": "object",
      "required": [
        "confidence",
        "entity_type"
      ],
      "properties": {
        "confidence": {
          "type": "number",
          "format": "double"
        },
        "entity_type": {
          "type": "string"
        }
      }
    },
    "UIHeddleSegment": {
      "description": "A segment from Heddle",
      "type": "object",
      "required": [
        "content"
      ],
      "properties": {
        "content": {
          "type": "string"
        },
        "subject": {
          "default": null,
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "UIPhysicsResult": {
      "description": "Physics simulation result",
      "type": "object",
      "required": [
        "energy",
        "position",
        "temperature"
      ],
      "properties": {
        "energy": {
          "type": "number",
          "format": "double"
        },
        "position": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          },
          "maxItems": 3,
          "minItems": 3
        },
        "temperature": {
          "type": "number",
          "format": "double"
        }
      }
    }
  }
}