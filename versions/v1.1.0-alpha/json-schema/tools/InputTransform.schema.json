{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Transforms for input mapping",
  "oneOf": [
    {
      "description": "Direct pass-through",
      "properties": {
        "type": {
          "enum": [
            "identity"
          ],
          "type": "string"
        }
      },
      "required": [
        "type"
      ],
      "type": "object"
    },
    {
      "description": "Extract array item",
      "properties": {
        "index": {
          "format": "uint",
          "minimum": 0.0,
          "type": "integer"
        },
        "type": {
          "enum": [
            "array_item"
          ],
          "type": "string"
        }
      },
      "required": [
        "index",
        "type"
      ],
      "type": "object"
    },
    {
      "description": "Filter array by condition",
      "properties": {
        "path": {
          "type": "string"
        },
        "type": {
          "enum": [
            "array_filter"
          ],
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "required": [
        "path",
        "type",
        "value"
      ],
      "type": "object"
    },
    {
      "description": "Map array items",
      "properties": {
        "template": {
          "type": "string"
        },
        "type": {
          "enum": [
            "array_map"
          ],
          "type": "string"
        }
      },
      "required": [
        "template",
        "type"
      ],
      "type": "object"
    },
    {
      "description": "Concatenate strings",
      "properties": {
        "separator": {
          "type": "string"
        },
        "type": {
          "enum": [
            "concat"
          ],
          "type": "string"
        }
      },
      "required": [
        "separator",
        "type"
      ],
      "type": "object"
    },
    {
      "description": "Custom transform function",
      "properties": {
        "function": {
          "type": "string"
        },
        "type": {
          "enum": [
            "custom"
          ],
          "type": "string"
        }
      },
      "required": [
        "function",
        "type"
      ],
      "type": "object"
    }
  ],
  "title": "InputTransform",
  "x-familiar-casing": "snake_case",
  "x-familiar-discriminator": "type",
  "x-familiar-enum-repr": "internally_tagged",
  "x-familiar-kind": "tool",
  "x-familiar-meta-schema": {
    "$ref": "../architecture/meta/Tool.meta.schema.json"
  },
  "x-familiar-queue": {
    "$ref": "../queues/worker-queue.queue.json"
  },
  "x-familiar-service": {
    "$ref": "../nodes/familiar-worker.node.json"
  },
  "x-familiar-variants": {
    "array_filter": "ArrayFilter",
    "array_item": "ArrayItem",
    "array_map": "ArrayMap",
    "concat": "Concat",
    "custom": "Custom",
    "identity": "Identity"
  }
}
