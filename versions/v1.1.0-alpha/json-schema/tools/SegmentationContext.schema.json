{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "KnownEntity": {
      "description": "Known entity for reference resolution",
      "properties": {
        "aliases": {
          "default": [],
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "entity_type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "entity_type",
        "id",
        "name"
      ],
      "type": "object"
    }
  },
  "description": "Context for segmentation",
  "properties": {
    "current_speaker": {
      "default": null,
      "description": "Current speaker (if known)",
      "type": [
        "string",
        "null"
      ]
    },
    "known_entities": {
      "default": [],
      "description": "Known entities for reference resolution",
      "items": {
        "$ref": "KnownEntity.schema.json"
      },
      "type": "array"
    },
    "previous_segments": {
      "default": [],
      "description": "Previous segments in the conversation",
      "items": {
        "$ref": "../primitives/Segment.schema.json"
      },
      "type": "array"
    },
    "tenant_id": {
      "description": "Tenant ID for multi-tenancy",
      "type": "string"
    }
  },
  "required": [
    "tenant_id"
  ],
  "title": "SegmentationContext",
  "type": "object",
  "x-familiar-kind": "tool",
  "x-familiar-meta-schema": {
    "$ref": "../architecture/meta/Tool.meta.schema.json"
  },
  "x-familiar-queue": {
    "$ref": "../queues/worker-queue.queue.json"
  },
  "x-familiar-service": {
    "$ref": "../nodes/familiar-worker.node.json"
  }
}
