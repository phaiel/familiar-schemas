{
  "$id": "https://familiar.dev/schemas/architecture/Action.meta.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Defines an atomic capability with explicit IO port contracts.",
  "properties": {
    "description": {
      "type": "string"
    },
    "id": {
      "type": "string"
    },
    "signature": {
      "properties": {
        "inputs": {
          "additionalProperties": {
            "properties": {
              "optional": {
                "default": false,
                "type": "boolean"
              },
              "schema": {
                "description": "Reference to the data type schema",
                "properties": {
                  "$ref": {
                    "type": "string"
                  }
                },
                "required": [
                  "$ref"
                ],
                "type": "object"
              },
              "semantics": {
                "$ref": "../enums/PortSemantics.schema.json",
                "default": "borrow",
                "description": "Memory management for the Arena"
              }
            },
            "required": [
              "schema"
            ],
            "type": "object"
          },
          "description": "Map of argument names to their type definitions and memory semantics",
          "type": "object"
        },
        "output": {
          "properties": {
            "nature": {
              "default": "atomic",
              "description": "Execution behavior",
              "enum": [
                "atomic",
                "stream",
                "future"
              ],
              "type": "string"
            },
            "schema": {
              "description": "Reference to the return type schema",
              "properties": {
                "$ref": {
                  "type": "string"
                }
              },
              "required": [
                "$ref"
              ],
              "type": "object"
            }
          },
          "required": [
            "schema"
          ],
          "type": "object"
        }
      },
      "required": [
        "inputs",
        "output"
      ],
      "type": "object"
    },
    "title": {
      "type": "string"
    },
    "x-familiar-compute-category": {
      "$ref": "../categories/ComputeCategory.schema.json",
      "description": "Computational nature for optimization"
    },
    "x-familiar-execution-model": {
      "$ref": "../enums/ExecutionModel.schema.json",
      "description": "Execution pattern for concurrency"
    },
    "x-familiar-kind": {
      "const": "action",
      "description": "Discriminator for the graph loader"
    },
    "x-familiar-reliability": {
      "$ref": "../enums/Reliability.schema.json",
      "description": "Reliability guarantees for error handling"
    },
    "x-familiar-side-effects": {
      "description": "External system interactions",
      "items": {
        "$ref": "../enums/SideEffect.schema.json"
      },
      "type": "array"
    },
    "x-familiar-tooling": {
      "description": "Required tooling capabilities for this action",
      "items": {
        "$ref": "../tooling/ToolingReference.schema.json"
      },
      "type": "array"
    }
  },
  "required": [
    "id",
    "x-familiar-kind",
    "signature"
  ],
  "title": "Action Definition (v2)",
  "type": "object"
}