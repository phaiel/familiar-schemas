{
  "$schema": "../../architecture/meta/Technique.meta.schema.json",
  "$id": "techniques/ingest_log.technique.json",
  "id": "ingest_log",
  "title": "Ingest Log Entry",
  "x-familiar-kind": "technique",

  "input": { "$ref": "../../tools/SegmentationInput.schema.json" },

  "output": { "$ref": "../../entities/Moment.schema.json" },

  "steps": [
    {
      "id": "classify",
      "kind": "call",
      "description": "Classify log entry content for routing",
      "action": { "$ref": "../actions/llm/classify.action.json" },
      "args": {
        "text": "${input.input.content}",
        "model_hint": "gpt-4o"
      }
    }
  ],

  "return": {
    "classification": "${classify}",
    "log_content": "${input.input.content}",
    "processed": true
  }
}
