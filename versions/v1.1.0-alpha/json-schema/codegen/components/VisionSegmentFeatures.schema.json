{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "BoundingBox": {
      "description": "Bounding box for object detection",
      "properties": {
        "height": {
          "format": "double",
          "type": "number"
        },
        "width": {
          "format": "double",
          "type": "number"
        },
        "x": {
          "format": "double",
          "type": "number"
        },
        "y": {
          "format": "double",
          "type": "number"
        }
      },
      "required": [
        "height",
        "width",
        "x",
        "y"
      ],
      "type": "object"
    },
    "DetectedAction": {
      "description": "A detected action in vision",
      "properties": {
        "action": {
          "type": "string"
        },
        "actor": {
          "default": null,
          "type": [
            "string",
            "null"
          ]
        },
        "confidence": {
          "format": "double",
          "type": "number"
        }
      },
      "required": [
        "action",
        "confidence"
      ],
      "type": "object"
    },
    "DetectedObject": {
      "description": "A detected object in vision",
      "properties": {
        "bounding_box": {
          "anyOf": [
            {
              "$ref": "#/definitions/BoundingBox"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "confidence": {
          "format": "double",
          "type": "number"
        },
        "label": {
          "type": "string"
        }
      },
      "required": [
        "confidence",
        "label"
      ],
      "type": "object"
    },
    "DetectedPerson": {
      "description": "A detected person in vision",
      "properties": {
        "bounding_box": {
          "anyOf": [
            {
              "$ref": "#/definitions/BoundingBox"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "emotion": {
          "default": null,
          "type": [
            "string",
            "null"
          ]
        },
        "face_id": {
          "default": null,
          "type": [
            "string",
            "null"
          ]
        }
      },
      "type": "object"
    }
  },
  "description": "Vision-specific segment features",
  "properties": {
    "actions": {
      "default": [],
      "description": "Actions/activities",
      "items": {
        "$ref": "#/definitions/DetectedAction"
      },
      "type": "array"
    },
    "objects": {
      "description": "Objects detected",
      "items": {
        "$ref": "#/definitions/DetectedObject"
      },
      "type": "array"
    },
    "people": {
      "default": [],
      "description": "People detected",
      "items": {
        "$ref": "#/definitions/DetectedPerson"
      },
      "type": "array"
    },
    "scene_description": {
      "description": "Scene description",
      "type": "string"
    },
    "text_content": {
      "default": null,
      "description": "Text in image (OCR)",
      "type": [
        "string",
        "null"
      ]
    }
  },
  "required": [
    "objects",
    "scene_description"
  ],
  "title": "VisionSegmentFeatures",
  "type": "object",
  "x-familiar-kind": "tool",
  "x-familiar-queue": "worker-queue",
  "x-familiar-service": {
    "$ref": "../../infrastructure/nodes/familiar-worker.node.json"
  }
}